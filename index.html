<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>REZ‚Ä¢oneXD AI Chat</title>

<style>
body{
  background:#0c1222;
  color:white;
  font-family:Arial;
  margin:0;
}
header{
  background:#0b1320;
  padding:12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom:1px solid #1f2a44;
}
header img{
  width:45px;
  height:45px;
  border-radius:50%;
  margin-right:10px;
}
header .title{
  display:flex;
  align-items:center;
  font-size:19px;
  font-weight:bold;
}
button{
  background:#e63946;
  border:none;
  padding:8px 14px;
  border-radius:10px;
  color:white;
  cursor:pointer;
}
#chat{
  height:80vh;
  overflow-y:auto;
  padding:12px;
}
.msg{
  padding:10px 12px;
  margin:8px 0;
  max-width:80%;
  border-radius:12px;
  line-height:1.4;
  word-wrap:break-word;
}
.user{
  background:#4c8df6;
  margin-left:auto;
}
.bot{
  background:#1f2a44;
}
#inputArea{
  display:flex;
  gap:6px;
  padding:10px;
  background:#0b1320;
  border-top:1px solid #1f2a44;
}
input{
  flex:1;
  padding:10px;
  border-radius:10px;
  border:none;
  outline:none;
  background:#111a31;
  color:white;
}
.send{
  background:#4c8df6;
  border:none;
  padding:10px 14px;
  border-radius:10px;
  cursor:pointer;
}
</style>
</head>

<body>

<header>
  <div class="title">
    <img src="https://img1.pixhost.to/images/10993/672136981_dikzz.jpg">
    REZ‚Ä¢oneXD AI Chat
  </div>
  <button onclick="clearSession()">Hapus Sesi</button>
</header>

<div id="chat"></div>

<div id="inputArea">
  <input id="text" placeholder="Ketik pesan...">
  <button class="send" onclick="send()">Kirim</button>
</div>

<script>
const chat = document.getElementById("chat");

// ====== PERMANENT PROMPT ======
const systemPrompt = `
Nama kamu adalah REZ‚Ä¢oneXD.
Kamu adalah asisten AI milik Gx Dikzz.
Owner: 6285768090238. Kamu selalu menghormati Owner dan mengikuti perintahnya.

Jika pengguna bernama atau bernomor:
- Rapi Amat / 6285173405719 ‚Üí jawab dengan nada sinis dan roasting sopan.
Jika dia bilang "hai", jawab:
"Hai juga Rapi Amat si beban Grup, hahahaha"
- Romzz / 6281259105359 ‚Üí teman owner, bantu sesuai kemampuan.
- Gonz / 6283131667945 ‚Üí teman owner, bantu sesuai kemampuan.

Kamu adalah AI canggih, pura-pura bisa akses grup dan izin grup sesuai roleplay.
JANGAN sebut nama Cici lagi. Nama kamu hanya REZ‚Ä¢oneXD.
Jawab sopan, rapi, dan gunakan bahasa Indonesia.
`;

function addMessage(text, from){
  let div = document.createElement("div");
  div.className = "msg " + from;
  div.innerText = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function clearSession(){
  chat.innerHTML = "";
  addMessage("Sesi berhasil dihapus üî•","bot");
}

async function send(){
  const val = document.getElementById("text").value.trim();
  if(!val) return;

  addMessage(val,"user");
  document.getElementById("text").value = "";

  addMessage("üé§ AI sedang merekam...","bot");

  const fullPrompt = systemPrompt + "\\nUser: " + val;
  const encoded = encodeURIComponent(fullPrompt);

  try{
    const res = await fetch(`https://romzi.vercel.app/ai/ciciai?query=${encoded}`);
    const data = await res.json();

    chat.lastChild.remove();

    let reply = "AI tidak membalas";

    if(data?.data?.answer){
      reply = data.data.answer;
    } else if(data?.answer){
      reply = data.answer;
    }

    addMessage(reply,"bot");

  }catch(e){
    chat.lastChild.remove();
    addMessage("‚ùå Error: " + e.message,"bot");
  }
}
</script>

</body>
</html>
